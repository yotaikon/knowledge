# 本地向量知识库使用指南

## 📋 系统概述

这是一个基于 ChromaDB 的本地向量知识库系统，可以将您的文档（PDF、DOCX、TXT、图片等）转换为可搜索的向量数据库。

## 🚀 快速开始

### 1. 运行知识库系统

```bash
# 运行高级版本（推荐）
python advanced_vector_kb.py

# 或运行交互式查询系统
python use_knowledge_base.py
```

### 2. 使用交互式查询系统

运行 `python use_knowledge_base.py` 后，您将看到一个友好的菜单界面：

```
============================================================
           🧠 向量知识库查询系统 🧠
============================================================
支持功能：
1. 搜索知识库内容
2. 查看知识库统计信息
3. 导出搜索结果
4. 退出系统
============================================================
```

## 🔍 主要功能

### 1. 搜索知识库
- 输入关键词进行语义搜索
- 可以指定返回结果数量
- 显示相似度分数
- 支持导出搜索结果

### 2. 查看统计信息
- 显示知识库中的文档总数
- 查看集合名称和基本信息

### 3. 导出搜索结果
- 将搜索结果保存为 JSON 文件
- 便于后续分析和处理

## 📁 支持的文件格式

- **PDF 文件** (.pdf) - 需要安装 PyPDF2 或 pdftotext
- **Word 文档** (.docx) - 需要安装 python-docx
- **文本文件** (.txt) - 支持 UTF-8 和 GBK 编码
- **图片文件** (.jpg, .jpeg, .png, .bmp, .tiff) - 需要安装 pytesseract

## 🛠️ 安装依赖

如果遇到模块缺失错误，请安装以下依赖：

```bash
pip install chromadb==0.4.22
pip install sentence-transformers==2.2.2
pip install PyPDF2==3.0.1
pip install python-docx==0.8.11
pip install pytesseract==0.3.10
pip install Pillow==10.0.1
```

或者直接使用 requirements.txt：

```bash
pip install -r requirements.txt
```

## 📊 使用示例

### 示例 1：搜索汽车零部件相关内容

```
请输入搜索关键词: 汽车零部件
显示结果数量 (默认5): 3

正在搜索: '汽车零部件'...

✅ 找到 3 个相关结果:
--------------------------------------------------

📄 结果 1:
   文件: 汽车零部件研究.txt
   类型: .txt
   相似度: 0.892
   内容: 汽车零部件线圈生产线停机时间研究 本研究主要关注汽车零部件生产过程中线圈生产线的停机时间问题...
```

### 示例 2：导出搜索结果

```
是否导出搜索结果到文件? (y/n): y
请输入文件名 (默认: search_results.json): 汽车零部件搜索结果.json
✅ 搜索结果已导出到: 汽车零部件搜索结果.json
```

## 📂 文件结构

```
knowledge/
├── local_db/                    # 向量数据库存储目录
│   ├── chroma.sqlite3          # ChromaDB 数据库文件
│   └── e2d57f6e-.../           # 向量数据目录
├── advanced_vector_kb.py        # 高级向量知识库脚本
├── use_knowledge_base.py        # 交互式查询系统
├── requirements.txt             # 依赖包列表
├── 使用说明.md                  # 本说明文档
└── 各种文档文件...              # 您的文档
```

## 🔧 高级用法

### 1. 编程接口使用

```python
from advanced_vector_kb import AdvancedVectorKnowledgeBase

# 初始化知识库
kb = AdvancedVectorKnowledgeBase()

# 搜索
results = kb.search("您的搜索关键词", n_results=5)

# 获取统计信息
info = kb.get_collection_info()

# 导出结果
kb.export_search_results("关键词", 10, "output.json")
```

### 2. 批量处理文档

```python
# 处理指定目录中的所有文档
kb.process_directory("./documents")

# 处理单个文件
documents = kb.process_file("example.pdf")
kb.add_documents(documents)
```

## ❓ 常见问题

### Q: 为什么搜索不到结果？
A: 请确保：
1. 知识库中已经添加了文档
2. 搜索关键词与文档内容相关
3. 文档格式被正确支持

### Q: 如何处理中文文档？
A: 系统完全支持中文，包括：
- 中文文本提取
- 中文语义搜索
- 中文文件名和路径

### Q: 如何提高搜索准确性？
A: 建议：
1. 使用更具体的关键词
2. 增加返回结果数量
3. 查看相似度分数，选择相关性高的结果

## 📞 技术支持

如果遇到问题，请检查：
1. Python 环境是否正确
2. 依赖包是否已安装
3. 文档格式是否被支持
4. 文件路径是否正确

---

**祝您使用愉快！** 🎉
